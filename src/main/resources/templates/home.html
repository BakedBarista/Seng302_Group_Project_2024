<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" lang="">
<head>
    <title>Pollinat*r</title>

    <meta http-equiv="Content-Type" context="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <th:block th:insert="~{fragments/general.html :: headerfiles}"></th:block>
</head>
<style>
    .about-me-container {
        max-height: 15vh;
        overflow: hidden;
        position: relative;
        transition: max-height 0.3s ease;
    }
    .about-me-container.expanded {
        max-height: none;
    }
    .about-me-container::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 20px;
        background: linear-gradient(to top, rgba(255, 255, 255, 1), rgba(255, 255, 255, 0));
        display: block;
    }
    .about-me-container.expanded::after {
        display: none;
    }
    .toggle-button {
        cursor: pointer;
        color: #007bff;
        background: none;
        border: none;
        padding: 0;
        font-size: 14px;
        text-align: right;
        margin-top: 5px;
    }
</style>
<body>
<nav th:replace="~{fragments/navbar :: navbar}"></nav>
<main class="d-flex flex-column align-items-center justify-content-center" style="margin: 10px">
    <h1 class="mt-2 text-center">Suggested Connections</h1>
    <div class="col-lg-5 col-md-10 col-sm-10">
        <div class="mt-4 shadow w-100">
            <div style="position: relative;">
                <img
                        class="suggest-user-picture card-img"
                        th:src="@{'/img/gorila.png'}"
                        alt="profile picture"
                        style="height:50vh; object-fit: cover;"
                />
                <div class="position-absolute bottom-0 text-light w-100"
                     style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.8));">
                    <div class="m-3 mt-6">
                        <div class="d-flex flex-column">
                            <span th:if="${name.length() >= 12}"><span class="d-sm-none d-flex mt-5"></span></span>
                            <h2 class="mb-1">[[${name}]]</h2>
                        </div>
                    </div>
                </div>
            </div>
            <div class="d-flex flex-column m-3">
                <div class="about-me-container" id="aboutMeContainer">
                    <h5 class="mb-1 about-me">About me...</h5>
                    <p>[[${description}]]</p>
                </div>
                <button class="toggle-button" id="toggleButton">See More</button>
            </div>
        </div>
        <div class="d-flex justify-content-around w-100 my-4 py-3 bg-primary-grey shadow">
            <div>
                <form th:action="@{/}" method="POST">
                    <input type="hidden" name="action" value="accept"/>
                    <button type="submit" class="rounded-circle btn-lg p-3 shadow" id="heartButton"
                            style="width: 90px; height: 90px; background-color: #DC3545; border: none;">
                        <img th:src="@{/icons/heart.svg}" width="50" height="50" alt="Accept" class="heart-icon"
                             id="heartIcon"/>
                    </button>
                </form>
            </div>
            <div>
                <form th:action="@{/}" method="POST">
                    <input type="hidden" name="action" value="decline"/>
                    <button type="submit" class="rounded-circle btn-lg p-3 shadow" id="declineButton"
                            style="width: 90px; height: 90px; background-color: #1E1E1E; border: 3px #1E1E1E;">
                        <img th:src="@{/icons/broken-heart.svg}" width="50" height="50" alt="Decline"
                             class="decline-icon" id="declineIcon"/>
                    </button>
                </form>
            </div>
        </div>
    </div>
    <div class="toast-container position-fixed bottom-0 end-0 p-3">

        <div id="acceptToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <strong class="me-auto">Pollinator</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body" id="toastBody">
                You have a new connection, check the friends tab for more info!
            </div>
        </div>
    </div>
</main>
<th:block th:insert="~{fragments/general.html :: bs-scripts}"></th:block>
<script>
    $(function () {
        $(".heart").on("click", function () {
            $(this).toggleClass("is-active");
        });
    });
</script>
<script>
    document.getElementById('toggleButton').addEventListener('click', function () {
        var container = document.getElementById('aboutMeContainer');
        var button = document.getElementById('toggleButton');

        container.classList.toggle('expanded');
        if (container.classList.contains('expanded')) {
            button.textContent = 'See Less';
        } else {
            button.textContent = 'See More';
        }
    });
    function addAnimation(buttonId) {
        let button = document.getElementById(buttonId);
        button.classList.add('animate');
        setTimeout(function () {
            button.classList.remove('animate');
        }, 600);
    }

    document.getElementById('heartButton').addEventListener('click', function () {
        addAnimation('heartButton');
    });

    document.getElementById('declineButton').addEventListener('click', function () {
        addAnimation('declineButton');
    });
</script>

<script th:src="@{/js/connection.js}"></script>
</body>
</html>
